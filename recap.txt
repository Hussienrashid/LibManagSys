âœ… FINAL RECAP â€” CATEGORY MANAGEMENT (JAVA SWING + JDBC)
1ï¸âƒ£ DATABASE (SOURCE OF TRUTH)
Your table:
Categories
-----------
CategoryID  (INT, AUTO_INCREMENT, PRIMARY KEY)
Name        (VARCHAR)
âœ” Database stores everything
âœ” No hard-coded categories
2ï¸âƒ£ JTable SETUP (MATCH DB)
String[] columnNames = {"CategoryID", "Name"};
DefaultTableModel tableModel = new DefaultTableModel(columnNames, 0);
JTable categoryTable = new JTable(tableModel);
âœ” Column index 0 â†’ CategoryID
âœ” Column index 1 â†’ Name
3ï¸âƒ£ FETCH FROM DATABASE (NO HARDCODE)
public List<Object[]> fetchCategories() {
    List<Object[]> data = new ArrayList<>();
    String sql = "SELECT CategoryID, Name FROM Categories";
    try (Connection con = Database.connect();
         PreparedStatement ps = con.prepareStatement(sql);
         ResultSet rs = ps.executeQuery()) {
        while (rs.next()) {
            data.add(new Object[]{
                rs.getInt("CategoryID"),
                rs.getString("Name")
            });
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return data;
}
âœ” DB â†’ Java
âœ” No fake data
4ï¸âƒ£ LOAD DATA INTO TABLE (ONE METHOD)
private void loadCategoryData(DefaultTableModel model) {
    model.setRowCount(0);
    for (Object[] row : fetchCategories()) {
        model.addRow(row);
    }
}


âœ” Reusable
âœ” Safe
âœ” Always syncs with DB
5ï¸âƒ£ ADD CATEGORY (CORRECT WAY)
addButton.addActionListener(e -> {
    String name = nameTextField.getText().trim();
    if (name.isEmpty()) {
        JOptionPane.showMessageDialog(frame, "Category name can't be empty.");
        return;
    }
    String sql = "INSERT INTO Categories (Name) VALUES (?)";
    try (Connection conn = Database.connect();
         PreparedStatement ps = conn.prepareStatement(sql)) {
        ps.setString(1, name);
        ps.executeUpdate();
        nameTextField.setText("");
        loadCategoryData(tableModel); // ğŸ”¥ refresh from DB
        JOptionPane.showMessageDialog(frame, "Category added successfully!");
    } catch (Exception ex) {
        ex.printStackTrace();
    }
});
âœ” Insert â†’ DB
âœ” Refresh â†’ JTable
6ï¸âƒ£ DELETE CATEGORY (CORRECT ID + COLUMN)
int selectedRow = categoryTable.getSelectedRow();
if (selectedRow == -1) return;
int categoryId = (int) tableModel.getValueAt(selectedRow, 0);
String categoryName = (String) tableModel.getValueAt(selectedRow, 1);
âœ” ID = column 0
âœ” Name = column 1
SQL:
DELETE FROM Categories WHERE CategoryID = ?
7ï¸âƒ£ REMOVE / IGNORE THESE âŒ
ğŸš« Hard-coded category lists
ğŸš« dao.addCategory()
ğŸš« txtCategoryId
ğŸš« Fake ID generation
ğŸš« loadCategories() without parameters
ONE architecture only.
ğŸ§  GOLDEN RULE (REMEMBER FOREVER)
Database = storage
JTable = display only
After any DB change â†’ reload table from DB